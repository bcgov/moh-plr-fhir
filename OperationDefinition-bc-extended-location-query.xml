<?xml version="1.0" encoding="UTF-8"?>

<OperationDefinition xmlns="http://hl7.org/fhir">
  <id value="bc-extended-location-query"/>
  <text>
    <status value="extensions"/><div xmlns="http://www.w3.org/1999/xhtml">Placeholder</div>
  </text>
  <url value="http://hlth.gov.bc.ca/fhir/provider/OperationDefinition/bc-extended-location-query"/>
  <version value="1.0.0"/>
  <name value="LocationExtendedQuery"/>
  <title value="Query for a location that returns associated resources"/>
  <status value="draft"/>
  <kind value="query"/>
  <date value="2023-09-07T21:19:16+00:00"/>
  <publisher value="BC Ministry of Health"/>
  <contact>
    <name value="BC Ministry of Health"/>
    <telecom>
      <system value="url"/>
      <value value="https://www2.gov.bc.ca/gov/content/governments/organizational-structure/ministries-organizations/ministries/health"/>
    </telecom>
  </contact>
  <description value="This operation is used to query for an location and will return the information for that location along with any instances that can be found by following associations to other providers, organizations, or location."/>
  <jurisdiction>
    <coding>
      <system value="urn:iso:std:iso:3166"/>
      <code value="CA"/>
      <display value="Canada"/>
    </coding>
  </jurisdiction>
  <code value="extendedQuery"/>
  <resource value="Location"/>
  <system value="false"/>
  <type value="true"/>
  <instance value="true"/>
  <parameter>
    <name value="identifier"/>
    <use value="in"/>
    <min value="0"/>
    <max value="1"/>
    <documentation value="String identifier value"/>
    <type value="string"/>
    <searchType value="string"/>
  </parameter>
  <parameter>
    <name value="identifier-type"/>
    <use value="in"/>
    <min value="0"/>
    <max value="1"/>
    <documentation value="String code for identifier type (e.g. LOCID), mandatory if identifier is specified. Mapping to Location.identifier.type.coding.code"/>
    <type value="string"/>
    <searchType value="token"/>
  </parameter>
  <parameter>
    <name value="name"/>
    <use value="in"/>
    <min value="0"/>
    <max value="1"/>
    <documentation value="Search for locations with the specified name."/>
    <type value="string"/>
    <searchType value="string"/>
  </parameter>
  <parameter>
    <name value="address-city"/>
    <use value="in"/>
    <min value="0"/>
    <max value="1"/>
    <documentation value="Search for locations with the specified city."/>
    <type value="string"/>
    <searchType value="string"/>
  </parameter>
  <parameter>
    <name value="address-line1"/>
    <use value="in"/>
    <min value="0"/>
    <max value="1"/>
    <documentation value="Search for locations with a civic address. Supports trailing wild card."/>
    <type value="string"/>
    <searchType value="string"/>
  </parameter>
  <parameter>
    <name value="otheraddress-line1"/>
    <use value="in"/>
    <min value="0"/>
    <max value="1"/>
    <documentation value="Search for locations with an address. Supports trailing wild card. Not implemented yet."/>
    <type value="string"/>
    <searchType value="string"/>
  </parameter>
  <parameter>
    <name value="healthAuthority"/>
    <use value="in"/>
    <min value="0"/>
    <max value="1"/>
    <documentation value="Search for locations within the specified health authority. Only one of healthAuthority, healthServiceDeliveryArea, localHealthArea, communityHealthServiceArea allowed. The full name is required. E.g. Langford/Highlands. See [this site](https://www2.gov.bc.ca/gov/content/data/geographic-data-services/land-use/administrative-boundaries/health-boundaries) for a list of accepteable strings."/>
    <type value="string"/>
    <searchType value="string"/>
  </parameter>
  <parameter>
    <name value="healthServiceDeliveryArea"/>
    <use value="in"/>
    <min value="0"/>
    <max value="1"/>
    <documentation value="Search for locations within the specified health service delivery area. See [this site](https://www2.gov.bc.ca/gov/content/data/geographic-data-services/land-use/administrative-boundaries/health-boundaries) for a list of accepteable strings."/>
    <type value="string"/>
    <searchType value="string"/>
  </parameter>
  <parameter>
    <name value="localHealthArea"/>
    <use value="in"/>
    <min value="0"/>
    <max value="1"/>
    <documentation value="Search for locations within the specified local health area. See [this site](https://www2.gov.bc.ca/gov/content/data/geographic-data-services/land-use/administrative-boundaries/health-boundaries) for a list of accepteable strings."/>
    <type value="string"/>
    <searchType value="string"/>
  </parameter>
  <parameter>
    <name value="communityHealthServiceArea"/>
    <use value="in"/>
    <min value="0"/>
    <max value="1"/>
    <documentation value="Search for locations within the specified local community health service area. See [this site](https://www2.gov.bc.ca/gov/content/data/geographic-data-services/land-use/administrative-boundaries/health-boundaries) for a list of accepteable strings."/>
    <type value="string"/>
    <searchType value="string"/>
  </parameter>
  <parameter>
    <name value="primaryCareNetwork"/>
    <use value="in"/>
    <min value="0"/>
    <max value="1"/>
    <documentation value="Search for locations within the specified Primary Care Network. Not implemented yet."/>
    <type value="string"/>
    <searchType value="string"/>
  </parameter>
  <parameter>
    <name value="withHistory"/>
    <use value="in"/>
    <min value="0"/>
    <max value="1"/>
    <documentation value="true or false, The withHistory parameter instructs PLR to search through historical records for matching attributes. Only the current data is returned."/>
    <type value="boolean"/>
  </parameter>
  <parameter>
    <name value="bundle"/>
    <use value="out"/>
    <min value="1"/>
    <max value="1"/>
    <documentation value="The Response Bundle with the OperationOutcome and the list of BCLocationBundle found by the search."/>
    <type value="Bundle"/>
  </parameter>
</OperationDefinition>